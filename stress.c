// Stress the ARMv3 vs thumb-2 changes#ifdef COMPCERT#define BARRIER_LOCK 	{ __builtin_barrier_dsb(); __builtin_barrier_isb(); }#define BARRIER_UNLOCK 	{ __builtin_barrier(); }#else#define BARRIER_LOCK 	{ asm volatile("dsb\n" "isb\n" ::: "memory"); }#define BARRIER_UNLOCK 	{ asm volatile("" ::: "memory"); }#endifchar p;char stress(int i) {	char *pt;	char s1 = (*(pt+4095));			// immediate field fits instruction	char s2 = (*(pt+4096));			// no fit, requires two instructions	char s3 = (*(pt-255));			// immediate field fits instruction	char s4 = (*(pt-256));			// no fit, requires two instructions	BARRIER_LOCK 	char s5 = (*(pt + (i<<3)));		// LSL and immediate field fits	char s6 = (*(pt + (i<<0)));		// LSL and immediate field fits	BARRIER_UNLOCK	char s7 = (*(pt + (i<<-1)));	// LSL, non-defined behaviour	char s8 = (*(pt + (i<<4)));		// LSL, no fit, requires two instructions	char s9 = (*(pt + (i>>1)));		// ASR, no LSL, requires two instructions	return s1+s2+s3+s4+s5+s6+s7+s8+s9;}